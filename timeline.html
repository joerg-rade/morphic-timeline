<!DOCTYPE html>
<html>
	<head>
		<title>Morphic Timeline</title>
		<script type="text/javascript" src="morphic.js"></script>
		<script type="text/javascript" src="widgets.js"></script>
		<script type="text/javascript" src="timeline.js"></script>
		<script type="text/javascript" src="timeline_setup.js"></script>
		<script type="text/javascript">		
		//TODOs
		// place checkboxes above graph -> AlignmentMorph (widget.js)
		// how can the world scale to 100%, take the available area?
		// how can timelineBars have labels?
		//
		// checkboxes flat instead of 3d
		// use passed in links / hours instead of y values for popup's
		// scale x-axis according to passed in Time scale, days, months, etc.

		// avoid v-scrollbar and use default 'scale'
		// have h-scrollbar as birds eye view 
		// - assign thumbnail of complete graph
		// - set focus either on actual date or one passed in
		// - hScroll without roundings
		//
		// have distances between tl bars evenly distributed, 
		// especially with parent/child joins in one line
		//
		// no fade out of vertical lines
		//
		// allow for milestones <> without duration, currently 1 day

			/**
			 * styling (css like) and dimensional parameters
			 */
			var api_fontSize = 15;
			var api_fontStyle = 'sans-serif'; //'1px serif' 'monospaced'
			var api_backColor = new Color(255, 255, 255); //white
			var api_textColor = new Color(0, 0, 0); //black;
			var api_defaultColor = new Color(255, 0, 0); //red - for test only
			var api_enableResize = false;
			var api_width = 800;
			var api_height = 600;
			var api_scrollBarHeight = 40; // horizontal
			var api_timelineHeight = 15; // Bar height
			var api_timelineOffset = 180; // offset for the tl bars
			var api_dateHeight = 7; // extent of the date marker
			var api_dateLineWidth = 3; // border of the date marker
			var api_padding = 0;
			
			/** (sample) event data */
			// minimum duration = 1 day for eventWOduration ... FIXME
			var data = '{"events" : [' +
'{ "id":"Vacation", "startDateStr":"2016-07-22", "endDateStr":"2016-08-15", "colorStr":"#FFFF00"  }' +
',{ "id":"Release 2.11", "startDateStr":"2016-02-15", "endDateStr":"2016-08-17", "colorStr":"#6A5ACD" }' +
',{ "id":"Test", "startDateStr":"2016-07-17", "endDateStr":"2016-08-17", "colorStr":"#00FF00", "parent":"Release 2.11" }' +
',{ "id":"GoLive", "startDateStr":"2016-08-17", "endDateStr":"2016-08-18", "colorStr":"#FF0000", "parent":"Release 2.11" }' +
',{ "id":"Release 2.12", "startDateStr":"2016-06-15", "endDateStr":"2016-11-23", "colorStr":"#6A5ACD" }' +
',{ "id":"GoLive", "startDateStr":"2016-11-23", "endDateStr":"2016-11-24", "colorStr":"#FF0000", "parent":"Release 2.12" }' +
',{ "id":"Release 3.3", "startDateStr":"2016-04-11", "endDateStr":"2016-09-05", "colorStr":"#87CEEB" }' +
',{ "id":"Release 3.4", "startDateStr":"2016-07-01", "endDateStr":"2016-12-31", "colorStr":"#87CEEB" }' +
']}';
			
			/** global vars */
			var eventList = []; // better call initEvents(data);
			var scaleLabels = [];	// better call initScale()
			var scaleData = [];	 

			var	world, timeline, root; 

			window.onload = function () {
				world = new WorldMorph(document.getElementById('world'));
				world.setColor(api_backColor);
				initData();
				initScale();
				timeline = new TimelineMorph();
				timeline.useFillPage = true;
				timeline.setPosition(new Point(0, 0));
				world.add(timeline);
				setInterval(loop, 1);
			};

			function loop() {
				world.doOneCycle();
			}
			
		</script>
	</head>

	<body>
		<canvas id="world" tabindex="1" width="100%" height="100%" style="position: absolute;">
			<p>Your browser doesn't support canvas.</p>
		</canvas>
	</body>
</html>