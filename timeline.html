<!DOCTYPE html>
<html>
	<head>
		<title>Morphic Timeline</title>
		<script type="text/javascript" src="morphic.js"></script>
		<script type="text/javascript" src="widgets.js"></script>
		<script type="text/javascript" src="timeline.js"></script>
		<script type="text/javascript" src="timeline_setup.js"></script>
		<script type="text/javascript">		
		//TODOs
		// place checkboxes above graph -> AlignmentMorph (widget.js)
		// how can the world sale to 100%, take the available area?
		// how can timelineBars have labels?
		//
		// checkboxes flat instead of 3d
		// use passed in links / hours instead of y values for popup's
		// scale x-axis according to passed in Time scale, days, months, etc.

		// avoid v-scrollbar and use default 'scale'
		// have h-scrollbar as birds eye view 
		// - assign thumbnail of complete graph
		// - set focus either on actual date or one passed in
		// - hScroll without roundings

			/**
			 * styling (css like) and dimensional parameters
			 */
			var api_fontSize = 15;
			var api_fontStyle = 'sans-serif'; //'1px serif' 'monospaced'
			var api_backColor = new Color(255, 255, 255); //white
			var api_textColor = new Color(0, 0, 0); //black;
			var api_red = new Color(255, 0, 0); //red - for test only
			var api_enableResize = false;
			var api_width = 800;
			var api_height = 600;
			var api_scrollBarHeight = 40; // horizontal
			var api_timelineHeight = 15; // Bar height
			var api_dateHeight = 10; // extent of the date marker
			var api_dateLineWidth = 1; // border of the date marker
			var api_padding = 0;
			
			/** (sample) event data */
			// minimum duration = 1 day for eventWOduration ... FIXME
			var data = '{"events" : [' +
'{ "title":"Vacation", "startDate":"2016-07-22", "endDate":"2016-08-15", "color":"#FFFF00"  }' +
',{ "title":"Release 2.11", "startDate":"2016-02-15", "endDate":"2016-08-17", "color":"#6A5ACD" }' +
',{ "title":"GoLive", "startDate":"2016-08-17", "endDate":"2016-08-18", "color":"#FF0000", "parent":"Release 2.11" }' +
',{ "title":"Release 3.3", "startDate":"2016-04-11", "endDate":"2016-09-05", "color":"#87CEEB" }' +
',{ "title":"Release 3.4", "startDate":"2016-07-01", "endDate":"2016-12-31", "color":"#87CEEB" }' +
']}';
			
			/** global vars */
			var eventList = [];
			var scaleLabels = [];			
			var scaleData = [];	

			var	world, timeline; 

			window.onload = function () {
				world = new WorldMorph(document.getElementById('world'));
				world.setColor(api_backColor);
				setup();
				timeline = new TimelineMorph();
				timeline.useFillPage = true;
				timeline.setPosition(new Point(0, 0));
				world.add(timeline);
				setInterval(loop, 1);
			};

			function loop() {
				world.doOneCycle();
			}
			
		</script>
	</head>

	<body>
		<canvas id="world" tabindex="1" width="100%" height="100%" style="position: absolute;">
			<p>Your browser doesn't support canvas.</p>
		</canvas>
	</body>
</html>